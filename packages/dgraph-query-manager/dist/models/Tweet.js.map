{"version":3,"sources":["../packages/dgraph-query-manager/src/models/Tweet.ts"],"names":[],"mappings":"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","file":"Tweet.js","sourcesContent":["// Lib\r\nimport * as faker from 'faker';\r\nimport * as twitter from 'twitter-text';\r\n// Local\r\nimport config from '../config';\r\nimport { BaseModel, BaseModelInterface, Hashtag, Uid, User } from '../models';\r\nimport { getRandomEnumElement, weightedBoolean } from '../helpers/utility';\r\nimport logger from '../logger';\r\n\r\nexport interface TweetInterface extends BaseModelInterface {\r\n  'tweet.createdAt': Date | string;\r\n  'tweet.favoriteCount'?: number;\r\n  'tweet.favorited': boolean;\r\n  'tweet.hashtag'?: Hashtag[];\r\n  'tweet.inReplyToStatusId'?: Uid;\r\n  'tweet.inReplyToUserId'?: Uid;\r\n  'tweet.isQuoteStatus': boolean;\r\n  'tweet.quotedStatus'?: Tweet;\r\n  'tweet.retweetCount'?: number;\r\n  'tweet.retweeted': boolean;\r\n  'tweet.text': string;\r\n  'tweet.user': User;\r\n}\r\n\r\nexport enum FakerTweetTypes {\r\n  COMPANY_BS,\r\n  COMPANY_CATCH_PHRASE,\r\n  HACKER,\r\n  WORDS,\r\n  LOREM\r\n}\r\n\r\nexport class Tweet extends BaseModel<Tweet> implements TweetInterface {\r\n  /**\r\n   * UTC time when this Tweet was created.\r\n   * @type {Date}\r\n   */\r\n  'tweet.createdAt': Date = new Date();\r\n\r\n  /**\r\n   * Collection of hashtags included in this Tweet, if applicable.\r\n   * @type {?Hashtag[]}\r\n   */\r\n  'tweet.hashtag'?: Hashtag[];\r\n\r\n  /**\r\n   * Indicates approximately how many times this Tweet has been liked by Twitter users.\r\n   * @type {?number}\r\n   */\r\n  'tweet.favoriteCount' = 0;\r\n\r\n  /**\r\n   * Indicates whether this Tweet has been favorited by the authenticating user.\r\n   * @type {boolean}\r\n   */\r\n  'tweet.favorited' = false;\r\n\r\n  /**\r\n   * If the represented Tweet is a reply, this field will contain the integer representation of the original Tweet’s ID.\r\n   * @type {?Uid}\r\n   */\r\n  'tweet.inReplyToStatusId'?: Uid;\r\n\r\n  /**\r\n   * If the represented Tweet is a reply, this field will contain the integer representation of the original Tweet’s author ID. This will not necessarily always be the user directly mentioned in the Tweet.\r\n   * @type {?Uid}\r\n   */\r\n  'tweet.inReplyToUserId'?: Uid;\r\n\r\n  /**\r\n   * Indicates whether this is a Quoted Tweet.\r\n   * @type {boolean}\r\n   */\r\n  'tweet.isQuoteStatus' = false;\r\n\r\n  /**\r\n   * Quoted Tweet, if applicable.\r\n   * @type {?Tweet}\r\n   */\r\n  'tweet.quotedStatus'?: Tweet;\r\n\r\n  /**\r\n   * Number of times this Tweet has been retweeted.\r\n   * @type {number}\r\n   */\r\n  'tweet.retweetCount' = 0;\r\n\r\n  /**\r\n   * Indicates whether this Tweet has been liked by the authenticating user.\r\n   * @type {boolean}\r\n   */\r\n  'tweet.retweeted' = false;\r\n\r\n  /**\r\n   * The actual UTF-8 text of the status upsert.\r\n   * @type {string}\r\n   */\r\n  'tweet.text': string;\r\n\r\n  /**\r\n   * The user who posted this Tweet.\r\n   * @type {User}\r\n   */\r\n  'tweet.user': User;\r\n\r\n  constructor(params: Partial<Tweet> = {}) {\r\n    super(params);\r\n    // Override defaults\r\n    Object.assign(this, Tweet.deserialize(params));\r\n  }\r\n\r\n  /**\r\n   * Deserialize Dgraph form of Tweet object.\r\n   * @param {Partial<any | Tweet>} params\r\n   * @returns {Promise<Partial<Tweet>>}\r\n   */\r\n  static deserialize<Tweet>(params: Partial<Tweet | any> = {}): Partial<Tweet> {\r\n    // Dates\r\n    if (params['tweet.createdAt'])\r\n      params['tweet.createdAt'] = new Date(params['tweet.createdAt']);\r\n    // User\r\n    if (params['tweet.user']) {\r\n      params['tweet.user'] = new User(params['tweet.user']);\r\n    }\r\n    // Hashtags\r\n    if (params['tweet.hashtag']) {\r\n      if (Array.isArray(params['tweet.hashtag'])) {\r\n        params['tweet.hashtag'] = params['tweet.hashtag'].map(\r\n          hashtag => new Hashtag(hashtag)\r\n        );\r\n      } else {\r\n        params['tweet.hashtag'] = [new Hashtag(params['tweet.hashtag'])];\r\n      }\r\n    }\r\n    // Uids\r\n    if (params['tweet.inReplyToStatusId'])\r\n      params['tweet.inReplyToStatusId'] = new Uid(\r\n        params['tweet.inReplyToStatusId']\r\n      );\r\n    if (params['tweet.inReplyToUserId'])\r\n      params['tweet.inReplyToUserId'] = new Uid(\r\n        params['tweet.inReplyToUserId']\r\n      );\r\n\r\n    params = super.deserialize(params);\r\n    return params;\r\n  }\r\n\r\n  /**\r\n   * Parses Tweet text and extracts Hashtags.\r\n   * @param {Partial<Tweet>} params\r\n   * @returns {Partial<Tweet>}\r\n   */\r\n  static extractHashtags(params: Partial<Tweet> = {}): Partial<Tweet> {\r\n    const text = params['tweet.text'];\r\n    // Ensure valid tweet\r\n    if (text && text.length > 0 && !twitter.isInvalidTweet(text)) {\r\n      // Extract hashtags\r\n      const extractedHashtags = twitter.extractHashtagsWithIndices(text);\r\n      if (\r\n        extractedHashtags &&\r\n        Array.isArray(extractedHashtags) &&\r\n        extractedHashtags.length > 0\r\n      ) {\r\n        const hashtags: any[] = [];\r\n        for (const element of extractedHashtags) {\r\n          // Add new Hashtag instance\r\n          hashtags.push(Hashtag.createObject(element.hashtag, element.indices));\r\n        }\r\n        // Assign hashtags\r\n        params['tweet.hashtag'] = hashtags;\r\n      }\r\n    }\r\n    return params;\r\n  }\r\n\r\n  /**\r\n   * Generates a Tweet instance for testing.\r\n   * @param {number} seed\r\n   * @param params\r\n   * @param mention\r\n   * @returns {Tweet}\r\n   */\r\n  static generate(\r\n    seed: number = config.faker.seed,\r\n    params?: Partial<User>,\r\n    mention?: User | User[]\r\n  ): Tweet {\r\n    return new Tweet(this.generateFakeParams(seed, params, mention));\r\n  }\r\n\r\n  /**\r\n   * Generates a mockup Tweet object for testing.\r\n   * @param {number} seed\r\n   * @param params\r\n   * @param mention\r\n   * @returns {Partial<Tweet>}\r\n   */\r\n  static generateFakeParams(\r\n    seed: number = config.faker.seed,\r\n    params?: Partial<User>,\r\n    mention?: User | User[]\r\n  ): Partial<Tweet> {\r\n    // Set seed base.\r\n    faker.seed(seed);\r\n    const max = 500;\r\n    return {\r\n      'tweet.favoriteCount': faker.random.number(max),\r\n      'tweet.favorited': faker.random.boolean(),\r\n      'tweet.isQuoteStatus': faker.random.boolean(),\r\n      'tweet.retweetCount': faker.random.number(max),\r\n      'tweet.retweeted': faker.random.boolean(),\r\n      'tweet.text': this.generateRandomTweetText(seed, mention),\r\n      'tweet.user': User.generate(),\r\n      ...params\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Generates random tweet text.\r\n   * @param seed\r\n   * @param mention\r\n   */\r\n  static generateRandomTweetText(\r\n    seed: number = config.faker.seed,\r\n    mention?: User | User[]\r\n  ): string {\r\n    const type: FakerTweetTypes = getRandomEnumElement(FakerTweetTypes);\r\n    let result;\r\n    switch (type) {\r\n      case FakerTweetTypes.COMPANY_BS:\r\n        result = Tweet.getValidTweetString(\r\n          [\r\n            faker.company.bsAdjective(),\r\n            faker.company.bsBuzz(),\r\n            faker.company.bsNoun()\r\n          ],\r\n          [\r\n            faker.company.catchPhraseAdjective(),\r\n            faker.company.catchPhraseAdjective()\r\n          ],\r\n          mention\r\n        );\r\n        return result;\r\n      case FakerTweetTypes.COMPANY_CATCH_PHRASE:\r\n        result = Tweet.getValidTweetString(\r\n          [\r\n            faker.company.catchPhraseAdjective(),\r\n            faker.company.catchPhraseDescriptor(),\r\n            faker.company.catchPhraseNoun()\r\n          ],\r\n          [faker.company.bsAdjective(), faker.company.bsAdjective()],\r\n          mention\r\n        );\r\n        return result;\r\n      case FakerTweetTypes.HACKER:\r\n        result = Tweet.getValidTweetString(\r\n          faker.hacker.phrase(),\r\n          [faker.hacker.ingverb(), faker.hacker.adjective()],\r\n          mention\r\n        );\r\n        return result;\r\n      case FakerTweetTypes.LOREM:\r\n        result = Tweet.getValidTweetString(\r\n          faker.lorem.sentence(),\r\n          [faker.company.bsAdjective(), faker.lorem.word()],\r\n          mention\r\n        );\r\n        return result;\r\n      case FakerTweetTypes.WORDS:\r\n        result = Tweet.getValidTweetString(\r\n          [\r\n            faker.random.word(),\r\n            faker.random.word(),\r\n            faker.random.word(),\r\n            faker.random.word()\r\n          ],\r\n          [faker.random.word(), faker.random.word()],\r\n          mention\r\n        );\r\n        return result;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generates hashtags from passed text field or 'tweet.text' property, using twitter-text lib.\r\n   * @param text\r\n   */\r\n  getHashtags(text: string) {\r\n    return twitter.extractHashtagsWithIndices(text ? text : this['tweet.text']);\r\n  }\r\n\r\n  /**\r\n   * Generates a random string suitable for a Tweet text field.\r\n   * @param word\r\n   * @param hashtag\r\n   * @param mention\r\n   */\r\n  static getValidTweetString(\r\n    word: string | string[],\r\n    hashtag?: number | string | string[],\r\n    mention?: User | User[]\r\n  ): string {\r\n    const result: string[] = [];\r\n\r\n    if (mention) {\r\n      if (mention instanceof Array && mention.length > 0) {\r\n        result.push(\r\n          mention.map(user => `@${user['user.screenName']}`).join(' ')\r\n        );\r\n      } else if (mention instanceof User) {\r\n        result.push(`@${mention['user.screenName']}`);\r\n      }\r\n    }\r\n\r\n    if (Array.isArray(word) && word.length > 0) {\r\n      result.push(word.join(' '));\r\n    } else if (typeof word === 'string') {\r\n      result.push(word);\r\n    }\r\n\r\n    if (hashtag) {\r\n      if (typeof hashtag === 'number') {\r\n        const tempTags: string[] = [];\r\n        // Generate number of hashtags\r\n        for (let count = 0; count <= hashtag; count++) {\r\n          tempTags.push(`#${faker.company.bsAdjective}`);\r\n        }\r\n        // Join with space delimiter.\r\n        result.push(tempTags.join(' '));\r\n      } else if (Array.isArray(hashtag) && hashtag.length > 0) {\r\n        result.push(hashtag.map(tag => `#${tag}`).join(' '));\r\n      } else if (typeof hashtag === 'string') {\r\n        result.push(`#${hashtag}`);\r\n      }\r\n    }\r\n\r\n    return result.join(' ');\r\n  }\r\n\r\n  /**\r\n   * Performs all steps of async Tweet creation.\r\n   * @param {Partial<Tweet>} params\r\n   * @returns {Promise<Partial<Tweet>>}\r\n   */\r\n  static async load(params: Partial<Tweet> = {}): Promise<Partial<Tweet>> {\r\n    // Combine paramTypes with default properties.\r\n    params = this.injectDefaults(params);\r\n    // Load child elements (e.g. User.load(['tweet.user']) )\r\n    params = await this.loadChildren(params);\r\n    // Serialize (e.g. convert fields to payload-compatible object)\r\n    params = await this.serialize(params);\r\n    // Perform mutation (e.g. upsert)\r\n    const serialization = await this.insert(params);\r\n    if (!params.uid) {\r\n      params.uid = new Uid(serialization);\r\n    }\r\n    // Deserialize (e.g. convert payload back to Models)\r\n    params = this.deserialize(params);\r\n    return params;\r\n  }\r\n\r\n  /**\r\n   * Performs all steps of async Tweet creation.\r\n   * @param {Partial<Tweet>} params\r\n   * @returns {Promise<Partial<Tweet>>}\r\n   */\r\n  async load(params: Partial<Tweet> = {}): Promise<Partial<Tweet>> {\r\n    // Combine paramTypes with default properties.\r\n    params = Tweet.injectDefaults(params);\r\n    // Load child elements (e.g. User.load(['tweet.user']) )\r\n    params = await Tweet.loadChildren(params);\r\n    // Serialize (e.g. convert fields to payload-compatible object)\r\n    params = await Tweet.serialize(params);\r\n    // Perform mutation (e.g. upsert)\r\n    const serialization = await Tweet.insert(params);\r\n    params.uid = new Uid(serialization);\r\n    // Deserialize (e.g. convert payload back to Models)\r\n    params = Tweet.deserialize(params);\r\n    return params;\r\n  }\r\n\r\n  /**\r\n   * Preprocessor that parses text, Hashtags, and User.  Invokes .create methods for each to ensure children exist.\r\n   * @param {Partial<Tweet>} params\r\n   * @returns {Promise<Partial<Tweet>>}\r\n   */\r\n  static async loadChildren(\r\n    params: Partial<Tweet> = {}\r\n  ): Promise<Partial<Tweet>> {\r\n    // Only create Hashtags if no Hashtags exist\r\n    if (!params['tweet.hashtag'] || params['tweet.hashtag'].length === 0) {\r\n      // Parse hashtags\r\n      params = this.extractHashtags(params);\r\n      // Create Hashtags\r\n      const hashtags = params['tweet.hashtag'];\r\n      if (hashtags && Array.isArray(hashtags) && hashtags.length > 0) {\r\n        params['tweet.hashtag'] = (await Hashtag.createMany(\r\n          hashtags\r\n        )) as Hashtag[];\r\n      }\r\n    }\r\n    // Create User\r\n    const user = params['tweet.user'];\r\n    if (user && Object.keys(user).length > 0) {\r\n      params['tweet.user'] = (await User.create(user)).response as User;\r\n    }\r\n    return params;\r\n  }\r\n}\r\n"]}