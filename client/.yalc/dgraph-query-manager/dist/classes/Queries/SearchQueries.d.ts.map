{"version":3,"sources":["../packages/dgraph-query-manager/src/classes/Queries/SearchQueries.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,KAAK,EAAE,MAAM,UAAU,CAAC;AAUjC,eAAO,MAAM,aAAa;;;;;CAqEzB,CAAC","file":"SearchQueries.d.ts","sourcesContent":["import { ParamType } from '../ParamType';\r\nimport { Query } from '../Query';\r\nimport { TypeOf } from '../TypeOf';\r\n\r\n// TODO: Build search to seek in following locations:\r\n// See better faker options at: http://faker.hook.io/?property=\r\n// tweet.text\r\n// user.screenName\r\n// user.description\r\n// hashtag.hashtag\r\n\r\nexport const SearchQueries = {\r\n  search: new Query(\r\n    `query find($query: string) {\r\n        a as var(func: anyoftext(tweet.text, $query)) \r\n        b as var(func: anyoftext(hashtag.hashtag, $query))\r\n        \r\n        data(func: has(tweet.text)) @filter(uid(a) OR uid(b)) {\r\n          uid\r\n          expand(_all_) {\r\n            uid\r\n            expand(_all_)\r\n          }\r\n        }\r\n     }`,\r\n    '/search/:query',\r\n    [new ParamType('$query', TypeOf(String))]\r\n  ),\r\n\r\n  searchHashtags: new Query(\r\n    `query find($query: string) {\r\n        data(func: uid($query))\r\n        {\r\n            uid\r\n            expand(_all_) {\r\n                uid\r\n                expand(_all_) \r\n            }\r\n        }\r\n     }`,\r\n    '/search/hashtag/:query',\r\n    [new ParamType('$query', TypeOf(String))]\r\n  ),\r\n\r\n  searchTweetText: new Query(\r\n    `query find($query: string) {\r\n    data(func: has(tweet.text)) @filter(anyoftext(tweet.text, $query))\r\n    {\r\n        uid\r\n        expand(_all_) \r\n        {\r\n          uid\r\n          expand(_all_)\r\n        }\r\n    }\r\n }`,\r\n    '/search/tweet/:query',\r\n    [new ParamType('$query', TypeOf(String))]\r\n  ),\r\n\r\n  searchBy: new Query(\r\n    `query find($query: string) {\r\n    data(func: has($has)) @filter($filterFunction($edge, $query))\r\n    {\r\n        uid\r\n        expand(_all_) \r\n        {\r\n          uid\r\n          expand(_all_)\r\n        }\r\n    }\r\n }`,\r\n    '/search/by/:edge/:has/:query',\r\n    [\r\n      new ParamType('$has', TypeOf(String), true),\r\n      new ParamType('$filterFunction', TypeOf(String), true),\r\n      new ParamType('$edge', TypeOf(String), true),\r\n      new ParamType('$query', TypeOf(String))\r\n    ]\r\n  )\r\n};\r\n"]}